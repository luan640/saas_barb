{% extends "base.html" %}
{% block header %}Vis√£o geral{% endblock %}
{% block content %}

<div class="container py-4">
  <!-- KPIs -->
  <div id="home-kpis" hx-get="{% url 'servicos:home' %}?fragment=kpis"
       hx-trigger="refreshKpis from:body"
       hx-target="#home-kpis" hx-swap="outerHTML">
    {% include "servicos/_kpis.html" %}
  </div>

  <div class="d-flex justify-content-between align-items-center mt-4 mb-2">
    <h5 class="m-0">Agendados</h5>
    <a class="btn btn-primary"
       hx-get="{% url 'servicos:order_create' %}"
       hx-target="#appModalContent"
       hx-swap="innerHTML">Nova comanda</a>
  </div>
  <div id="orders-scheduled-table"
       hx-get="{% url 'servicos:home' %}?fragment=scheduled"
       hx-trigger="refreshOrdersScheduled from:body"
       hx-target="#orders-scheduled-table" hx-swap="outerHTML">
    {% include "servicos/_orders_table.html" with orders=scheduled table_id="orders-scheduled-table" title="Agendados" %}
  </div>

  <div class="d-flex justify-content-between align-items-center mt-4 mb-2">
    <h5 class="m-0">Em andamento</h5>
  </div>
  <div id="orders-inprogress-table"
       hx-get="{% url 'servicos:home' %}?fragment=inprogress"
       hx-trigger="refreshOrdersInProgress from:body"
       hx-target="#orders-inprogress-table" hx-swap="outerHTML">
    {% include "servicos/_orders_table.html" with orders=in_progress table_id="orders-inprogress-table" title="Em andamento" %}
  </div>
</div>
{% endblock %}
